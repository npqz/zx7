-- Step 1: Create DUI
local dui = MachoCreateDui("about:blank")

-- Step 2: Show DUI
MachoShowDui(dui)

-- Step 3: HTML with search + categories
local html = [[
<!DOCTYPE html>
<html>
<head>
  <title>Feature Menu</title>
  <style>
    body {
      background: #121212;
      color: white;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      padding: 20px;
    }
    h1 {
      margin-bottom: 20px;
    }
    input {
      padding: 10px;
      width: 300px;
      font-size: 16px;
      margin-bottom: 20px;
    }
    .category {
      background: #2a2a2a;
      padding: 10px 20px;
      margin: 5px 0;
      border-radius: 5px;
      width: 300px;
      text-align: center;
      cursor: pointer;
      transition: background 0.3s;
    }
    .category:hover {
      background: #444;
    }
    #notFound {
      color: red;
      margin-top: 10px;
      display: none;
    }
  </style>
</head>
<body>
  <h1>Macho Menu</h1>
  <input type="text" id="search" placeholder="Search for a feature...">

  <div id="categories">
    <div class="category" data-name="Player">Player</div>
    <div class="category" data-name="Server">Server</div>
    <div class="category" data-name="Vehicle">Vehicle</div>
    <div class="category" data-name="Weapon">Weapon</div>
    <div class="category" data-name="Visuals">Visuals</div>
    <div class="category" data-name="Miscellaneous">Miscellaneous</div>
    <div class="category" data-name="Settings">Settings</div>
  </div>

  <div id="notFound">Not Found</div>

  <script>
    const searchInput = document.getElementById("search");
    const categories = document.querySelectorAll(".category");
    const notFound = document.getElementById("notFound");

    searchInput.addEventListener("input", () => {
      const query = searchInput.value.toLowerCase();
      let found = false;

      categories.forEach(cat => {
        const name = cat.getAttribute("data-name").toLowerCase();
        if (name.includes(query) || query === "") {
          cat.style.display = "block";
          if (query !== "") found = true;
        } else {
          cat.style.display = "none";
        }
      });

      // Show/hide "Not Found"
      if (query !== "" && !Array.from(categories).some(cat => cat.style.display === "block")) {
        notFound.style.display = "block";
      } else {
        notFound.style.display = "none";
      }
    });

    // Send click events to Lua
    categories.forEach(cat => {
      cat.addEventListener("click", () => {
        if (window.macho && macho.sendMessage) {
          macho.sendMessage(JSON.stringify({ type: "categoryClick", category: cat.getAttribute("data-name") }));
        }
      });
    });
  </script>
</body>
</html>
]]

-- Step 4: Inject HTML into DUI
MachoExecuteDuiScript(dui, "document.write(`" .. html .. "`);")

-- Step 5: Optional welcome message
MachoSendDuiMessage(dui, "Welcome to the Macho Menu!")
